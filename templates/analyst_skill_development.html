{% extends "layout.html" %}

{% block title %}Skill Development{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>
                    <i class="fas fa-graduation-cap text-primary me-2"></i>Skill Development Dashboard
                </h2>
                <a href="{{ url_for('analyst_dashboard') }}" class="btn btn-outline-primary">
                    <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                </a>
            </div>

            <!-- Skill Progress Overview -->
            <div class="row mb-4">
                {% for skill_name, skill_data in skills.items() %}
                <div class="col-md-6 mb-3">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h6 class="mb-0">{{ skill_name }}</h6>
                                <span class="badge bg-primary">Level {{ skill_data.level }}</span>
                            </div>
                            <div class="progress mb-2" style="height: 10px;">
                                <div class="progress-bar" role="progressbar" 
                                     style="width: {{ skill_data.progress }}%"
                                     aria-valuenow="{{ skill_data.progress }}" 
                                     aria-valuemin="0" aria-valuemax="100">
                                </div>
                            </div>
                            <small class="text-muted">{{ skill_data.progress }}% Progress to Next Level</small>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Learning Recommendations -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-lightbulb me-2"></i>Learning Recommendations
                    </h5>
                </div>
                <div class="card-body">
                    {% if recommendations %}
                        <div class="row">
                            {% for rec in recommendations %}
                            <div class="col-md-4 mb-3">
                                <div class="card border-left-{{ 'danger' if rec.priority == 'High' else 'warning' if rec.priority == 'Medium' else 'info' }}">
                                    <div class="card-body">
                                        <h6 class="card-title">{{ rec.skill }}</h6>
                                        <p class="card-text">{{ rec.suggestion }}</p>
                                        <span class="badge bg-{{ 'danger' if rec.priority == 'High' else 'warning' if rec.priority == 'Medium' else 'info' }}">
                                            {{ rec.priority }} Priority
                                        </span>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-3">
                            <i class="fas fa-trophy fa-3x text-success mb-3"></i>
                            <h5 class="text-success">Excellent Progress!</h5>
                            <p class="text-muted">You're doing well across all skill areas. Keep up the great work!</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Skill Development Resources -->
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0">
                                <i class="fas fa-book me-2"></i>Learning Resources
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                <div class="list-group-item">
                                    <h6 class="mb-1">Technical Analysis</h6>
                                    <p class="mb-1 small">Chart patterns, indicators, and price action</p>
                                    <small class="text-muted">üìà Practice with live charts and backtesting</small>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1">Fundamental Analysis</h6>
                                    <p class="mb-1 small">Financial statement analysis and valuation</p>
                                    <small class="text-muted">üìä Review quarterly earnings and annual reports</small>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1">Report Writing</h6>
                                    <p class="mb-1 small">Clear communication and structure</p>
                                    <small class="text-muted">‚úçÔ∏è Use templates and peer reviews</small>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1">Research Methodology</h6>
                                    <p class="mb-1 small">Data gathering and analysis techniques</p>
                                    <small class="text-muted">üîç Practice systematic research approaches</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-warning text-dark">
                            <h6 class="mb-0">
                                <i class="fas fa-target me-2"></i>Skill Development Goals
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">Set Monthly Goals</label>
                                <div class="input-group mb-2">
                                    <span class="input-group-text">üìù</span>
                                    <input type="number" class="form-control" placeholder="Reports to submit" min="1" max="20">
                                </div>
                                <div class="input-group mb-2">
                                    <span class="input-group-text">‚è±Ô∏è</span>
                                    <input type="number" class="form-control" placeholder="Hours to spend" min="10" max="100">
                                </div>
                                <div class="input-group mb-2">
                                    <span class="input-group-text">üéØ</span>
                                    <input type="number" class="form-control" placeholder="Target quality score %" min="60" max="100">
                                </div>
                                <button class="btn btn-primary btn-sm w-100">
                                    <i class="fas fa-save me-2"></i>Save Goals
                                </button>
                            </div>

                            <div class="border-top pt-3">
                                <h6>Quick Actions</h6>
                                <div class="d-grid gap-2">
                                    <a href="{{ url_for('research_templates') }}" class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-file-alt me-2"></i>Browse Templates
                                    </a>
                                    <a href="{{ url_for('submit_research_report') }}" class="btn btn-outline-success btn-sm">
                                        <i class="fas fa-plus me-2"></i>Submit New Report
                                    </a>
                                    <button class="btn btn-outline-info btn-sm" onclick="takeSkillAssessment()">
                                        <i class="fas fa-quiz me-2"></i>Take Skill Assessment
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Achievement History -->
            <div class="card mt-4">
                <div class="card-header bg-secondary text-white">
                    <h6 class="mb-0">
                        <i class="fas fa-medal me-2"></i>Achievement History
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="timeline">
                                <div class="timeline-item">
                                    <div class="timeline-marker bg-success"></div>
                                    <div class="timeline-content">
                                        <h6 class="mb-1">Report Writing - Level 2 Achieved</h6>
                                        <p class="mb-0 small text-muted">Submitted 5 high-quality reports</p>
                                        <small class="text-muted">2 days ago</small>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-marker bg-info"></div>
                                    <div class="timeline-content">
                                        <h6 class="mb-1">First Quality Score Above 80%</h6>
                                        <p class="mb-0 small text-muted">Excellent analysis on TCS quarterly results</p>
                                        <small class="text-muted">1 week ago</small>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-marker bg-primary"></div>
                                    <div class="timeline-content">
                                        <h6 class="mb-1">Technical Analysis - Level 1 Achieved</h6>
                                        <p class="mb-0 small text-muted">Completed basic technical analysis requirements</p>
                                        <small class="text-muted">2 weeks ago</small>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-marker bg-warning"></div>
                                    <div class="timeline-content">
                                        <h6 class="mb-1">Analyst Account Created</h6>
                                        <p class="mb-0 small text-muted">Welcome to the research platform!</p>
                                        <small class="text-muted">{{ analyst.created_at.strftime('%B %d, %Y') if analyst.created_at }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.border-left-danger {
    border-left: 4px solid #dc3545;
}
.border-left-warning {
    border-left: 4px solid #ffc107;
}
.border-left-info {
    border-left: 4px solid #17a2b8;
}

.timeline {
    position: relative;
    padding-left: 30px;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 15px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #dee2e6;
}

.timeline-item {
    position: relative;
    margin-bottom: 20px;
}

.timeline-marker {
    position: absolute;
    left: -37px;
    top: 5px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid #fff;
}

.timeline-content {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.progress {
    border-radius: 10px;
}

.progress-bar {
    background: linear-gradient(90deg, #28a745, #20c997);
}
</style>

<script>
function takeSkillAssessment() {
    alert('Skill assessment feature coming soon! This will help evaluate your current skill levels.');
}

// Animate progress bars on page load
document.addEventListener('DOMContentLoaded', function() {
    const progressBars = document.querySelectorAll('.progress-bar');
    progressBars.forEach(bar => {
        const width = bar.style.width;
        bar.style.width = '0%';
        setTimeout(() => {
            bar.style.transition = 'width 1.5s ease-in-out';
            bar.style.width = width;
        }, 500);
    });
});
</script>
{% endblock %}
